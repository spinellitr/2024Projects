<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:6604/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tawny Spinelli">
<meta name="dcterms.date" content="2024-12-19">

<title>Creating US Maps</title>
<style class="anchorjs"></style><style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="./Creating US Maps_files/clipboard.min.js"></script>
<script src="./Creating US Maps_files/quarto.js"></script>
<script src="./Creating US Maps_files/popper.min.js"></script>
<script src="./Creating US Maps_files/tippy.umd.min.js"></script>
<script src="./Creating US Maps_files/anchor.min.js"></script>
<link href="./Creating US Maps_files/tippy.css" rel="stylesheet">
<link href="./Creating US Maps_files/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="./Creating US Maps_files/bootstrap.min.js"></script>
<link href="./Creating US Maps_files/bootstrap-icons.css" rel="stylesheet">
<link href="./Creating US Maps_files/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


<style>.ansi-display{font-family:monospace;white-space:pre-wrap;--ansiBlack: #000000;--ansiRed: #cd3131;--ansiGreen: #00BC00;--ansiYellow: #949800;--ansiBlue: #0451a5;--ansiMagenta: #bc05bc;--ansiCyan: #0598bc;--ansiWhite: #555555;--ansiBrightBlack: #666666;--ansiBrightRed: #cd3131;--ansiBrightGreen: #14CE14;--ansiBrightYellow: #b5ba00;--ansiBrightBlue: #0451a5;--ansiBrightMagenta: #bc05bc;--ansiBrightCyan: #0598bc;--ansiBrightWhite: #a5a5a5}.dark-mode .ansi-display{--ansiBlack: #000000;--ansiRed: #cd3131;--ansiGreen: #0DBC79;--ansiYellow: #e5e510;--ansiBlue: #2472c8;--ansiMagenta: #bc3fbc;--ansiCyan: #11a8cd;--ansiWhite: #e5e5e5;--ansiBrightBlack: #666666;--ansiBrightRed: #f14c4c;--ansiBrightGreen: #23d18b;--ansiBrightYellow: #f5f543;--ansiBrightBlue: #3b8eea;--ansiBrightMagenta: #d670d6;--ansiBrightCyan: #29b8db;--ansiBrightWhite: #e5e5e5}@keyframes ansi-displaly-run-blink{50%{opacity:0}}.fui-FluentProvider h2{border-bottom:none;padding-bottom:0}</style><style data-make-styles-bucket="d" data-priority="0"></style><style id="fui-FluentProviderr0"></style></head>

<body class="fullcontent quarto-light" data-tabster="{&quot;root&quot;:{}}">

<i tabindex="0" role="none" data-tabster-dummy="" aria-hidden="true" style="position: fixed; height: 1px; width: 1px; opacity: 0.001; z-index: -1; content-visibility: hidden; top: 0px; left: 0px;"></i><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Creating US Maps</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Tawny Spinelli </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 19, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="visualizing-data-with-plot_usmap" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-data-with-plot_usmap">Visualizing Data with plot_usmap()<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6604/#visualizing-data-with-plot_usmap" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>Below, I’ve created example code to help visualize national data. You can use this code to set a part states or create heat maps. As there are several ways to create these types of maps in R, my aim is to add helpful examples to the overall pool and to share some of the code I’ve created.</p>
</section>
<section id="helpful-resources" class="level2">
<h2 class="anchored" data-anchor-id="helpful-resources">Helpful Resources<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6604/#helpful-resources" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>To create the maps below, I relied heavily on information I found on the web and other users’ code. I tried to notate those resources throughout this document.</p>
<p>The basics with examples:</p>
<p><a href="https://jtr13.github.io/cc19/different-ways-of-plotting-u-s-map-in-r.html" class="uri">https://jtr13.github.io/cc19/different-ways-of-plotting-u-s-map-in-r.html</a></p>
<p><a href="https://www.rdocumentation.org/packages/usmap/versions/0.7.1/topics/plot_usmap" class="uri">https://www.rdocumentation.org/packages/usmap/versions/0.7.1/topics/plot_usmap</a></p>
<p>There are several ways to plot maps. I used plot_usmap() because it included Alaska and Hawaii already in the map and because I could use my ggplot2 knowledge to add layers like text below the map. You can also use ggplot by itself but extra steps are necessary to display Alaska and Hawaii in the plot.</p>
</section>
<section id="setting-up" class="level2">
<h2 class="anchored" data-anchor-id="setting-up">Setting Up<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6604/#setting-up" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>First, load necessary packages. You may need to install if these are not already in your library.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="http://localhost:6604/#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="http://localhost:6604/#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usmap)</span>
<span id="cb1-3"><a href="http://localhost:6604/#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb1-4"><a href="http://localhost:6604/#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tinytex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Since this is an ongoing project, I created a dummy database called, “Duplicate Data for Sharing.” It’s uploaded here. Feel free to download it, set your working directory, and read in the file, if you want to follow along. It should read in as 51 observations of 8 variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="http://localhost:6604/#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Users/tawny/Desktop"</span>)</span>
<span id="cb2-2"><a href="http://localhost:6604/#cb2-2" aria-hidden="true" tabindex="-1"></a>Duplicate_Map_Data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Duplicate Data for Sharing.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="base-code-for-us-maps" class="level2">
<h2 class="anchored" data-anchor-id="base-code-for-us-maps">Base Code for US Maps<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6604/#base-code-for-us-maps" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p><u><strong>Important</strong></u>: To use plot_usmap, your database / dataframe <em>MUST</em> have a column named “fips” that corresponds to the Federal Information Processing Standards (FIPS) codes that are used by the postal service and for the census. States have 2-digit codes and counties has 5-digit codes. You can find an easily downloadable version of the fips codes here: <a href="https://gist.github.com/dantonnoriega/bf1acd2290e15b91e6710b6fd3be0a53" class="uri">https://gist.github.com/dantonnoriega/bf1acd2290e15b91e6710b6fd3be0a53</a>.</p>
<p>Be sure that the codes match up to how your states / counties are organized. For instance, D.C. is included in the list. Also, while the list appears to go sequentially, it skips numbers (e.g., no 3). So, as with anything, double check.</p>
<p>The code below is the most basic to generate a map highlighting the values you want to use.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="http://localhost:6604/#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_usmap</span>(<span class="at">data =</span> Duplicate_Map_Data, <span class="at">values =</span> <span class="st">"Numbers_1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Creating US Maps_files/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="map-elements" class="level2">
<h2 class="anchored" data-anchor-id="map-elements">Map Elements<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6604/#map-elements" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>I wanted to add in more elements and make it more aesthetically pleasing. The code below contains several options. You can add additional options or take out options depending on your needs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="http://localhost:6604/#cb4-1" aria-hidden="true" tabindex="-1"></a>frequencies_map1 <span class="ot">&lt;-</span></span>
<span id="cb4-2"><a href="http://localhost:6604/#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_usmap</span>(<span class="at">data =</span> Duplicate_Map_Data, <span class="at">values =</span> <span class="st">"Numbers_1"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">regions =</span> <span class="st">"states"</span>, <span class="at">include =</span> <span class="fu">c</span>(), <span class="at">labels =</span> <span class="cn">TRUE</span>, <span class="at">label_color =</span> <span class="st">"white"</span>) <span class="sc">+</span> </span>
<span id="cb4-3"><a href="http://localhost:6604/#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Title"</span>) <span class="sc">+</span></span>
<span id="cb4-4"><a href="http://localhost:6604/#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">"Subtitle"</span>) <span class="sc">+</span></span>
<span id="cb4-5"><a href="http://localhost:6604/#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb4-6"><a href="http://localhost:6604/#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb4-7"><a href="http://localhost:6604/#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)) <span class="sc">+</span></span>
<span id="cb4-8"><a href="http://localhost:6604/#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb4-9"><a href="http://localhost:6604/#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">low =</span> <span class="st">"lightskyblue2"</span>, <span class="at">high =</span> <span class="st">"black"</span>, <span class="at">name =</span> <span class="st">"Scale"</span>, <span class="at">label =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb4-10"><a href="http://localhost:6604/#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="http://localhost:6604/#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb4-12"><a href="http://localhost:6604/#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">1</span>, <span class="at">y=</span> <span class="dv">1</span>, <span class="at">label=</span> <span class="st">"Example text box"</span>,    </span>
<span id="cb4-13"><a href="http://localhost:6604/#cb4-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">color=</span><span class="st">"black"</span>, <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">35</span>, <span class="at">size =</span> <span class="fl">2.6</span>) </span>
<span id="cb4-14"><a href="http://localhost:6604/#cb4-14" aria-hidden="true" tabindex="-1"></a>frequencies_map1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Creating US Maps_files/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>For instance, you can turn off the labels to get rid of the state abbreviations:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="http://localhost:6604/#cb5-1" aria-hidden="true" tabindex="-1"></a>frequencies_map2 <span class="ot">&lt;-</span></span>
<span id="cb5-2"><a href="http://localhost:6604/#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_usmap</span>(<span class="at">data =</span> Duplicate_Map_Data, <span class="at">values =</span> <span class="st">"Numbers_1"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">regions =</span> <span class="st">"states"</span>, <span class="at">include =</span> <span class="fu">c</span>(), <span class="at">labels =</span> <span class="cn">FALSE</span>, <span class="at">label_color =</span> <span class="st">"white"</span>) <span class="sc">+</span> </span>
<span id="cb5-3"><a href="http://localhost:6604/#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Title"</span>) <span class="sc">+</span></span>
<span id="cb5-4"><a href="http://localhost:6604/#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">"Subtitle"</span>) <span class="sc">+</span></span>
<span id="cb5-5"><a href="http://localhost:6604/#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb5-6"><a href="http://localhost:6604/#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb5-7"><a href="http://localhost:6604/#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)) <span class="sc">+</span></span>
<span id="cb5-8"><a href="http://localhost:6604/#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb5-9"><a href="http://localhost:6604/#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">low =</span> <span class="st">"lightskyblue2"</span>, <span class="at">high =</span> <span class="st">"black"</span>, <span class="at">name =</span> <span class="st">"Scale"</span>, <span class="at">label =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb5-10"><a href="http://localhost:6604/#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="http://localhost:6604/#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb5-12"><a href="http://localhost:6604/#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">1</span>, <span class="at">y=</span> <span class="dv">1</span>, <span class="at">label=</span> <span class="st">"Example text box"</span>,    </span>
<span id="cb5-13"><a href="http://localhost:6604/#cb5-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">color=</span><span class="st">"black"</span>, <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">35</span>, <span class="at">size =</span> <span class="fl">2.6</span>) </span>
<span id="cb5-14"><a href="http://localhost:6604/#cb5-14" aria-hidden="true" tabindex="-1"></a>frequencies_map2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Creating US Maps_files/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>You can also just delete that portion of the code as the default is FALSE:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="http://localhost:6604/#cb6-1" aria-hidden="true" tabindex="-1"></a>frequencies_map3 <span class="ot">&lt;-</span></span>
<span id="cb6-2"><a href="http://localhost:6604/#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_usmap</span>(<span class="at">data =</span> Duplicate_Map_Data, <span class="at">values =</span> <span class="st">"Numbers_1"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">regions =</span> <span class="st">"states"</span>, <span class="at">include =</span> <span class="fu">c</span>()) <span class="sc">+</span> </span>
<span id="cb6-3"><a href="http://localhost:6604/#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Title"</span>) <span class="sc">+</span></span>
<span id="cb6-4"><a href="http://localhost:6604/#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">"Subtitle"</span>) <span class="sc">+</span></span>
<span id="cb6-5"><a href="http://localhost:6604/#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb6-6"><a href="http://localhost:6604/#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb6-7"><a href="http://localhost:6604/#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)) <span class="sc">+</span></span>
<span id="cb6-8"><a href="http://localhost:6604/#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb6-9"><a href="http://localhost:6604/#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">low =</span> <span class="st">"lightskyblue2"</span>, <span class="at">high =</span> <span class="st">"black"</span>, <span class="at">name =</span> <span class="st">"Scale"</span>, <span class="at">label =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb6-10"><a href="http://localhost:6604/#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="http://localhost:6604/#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb6-12"><a href="http://localhost:6604/#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">1</span>, <span class="at">y=</span> <span class="dv">1</span>, <span class="at">label=</span> <span class="st">"Example text box"</span>,    </span>
<span id="cb6-13"><a href="http://localhost:6604/#cb6-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">color=</span><span class="st">"black"</span>, <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">35</span>, <span class="at">size =</span> <span class="fl">2.6</span>) </span>
<span id="cb6-14"><a href="http://localhost:6604/#cb6-14" aria-hidden="true" tabindex="-1"></a>frequencies_map3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Creating US Maps_files/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="map-colors" class="level2">
<h2 class="anchored" data-anchor-id="map-colors">Map Colors<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6604/#map-colors" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>You can change colors to nearly whatever you want but consider how it may look if printed in black and white and for persons who are colorblind. In addition, you’ll want enough color distinction to tell the various categories a part. Here are a few resources related to color:</p>
<p>Color Palette Cheatsheet: <a href="https://www.nceas.ucsb.edu/sites/default/files/2020-04/colorPaletteCheatsheet.pdf" class="uri">https://www.nceas.ucsb.edu/sites/default/files/2020-04/colorPaletteCheatsheet.pdf</a></p>
<p>Page 3 has a list of the predefined colors in R, which is also available in other places. I did not use any of the other color packages for any of the maps shown here.</p>
<p>R Cookbook Colors (ggplot2): <a href="http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/" class="uri">http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/</a><br>
</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="http://localhost:6604/#cb7-1" aria-hidden="true" tabindex="-1"></a>frequencies_map4 <span class="ot">&lt;-</span></span>
<span id="cb7-2"><a href="http://localhost:6604/#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_usmap</span>(<span class="at">data =</span> Duplicate_Map_Data, <span class="at">values =</span> <span class="st">"Numbers_1"</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">regions =</span> <span class="st">"states"</span>, <span class="at">include =</span> <span class="fu">c</span>(), <span class="at">labels =</span> <span class="cn">TRUE</span>, <span class="at">label_color =</span> <span class="st">"wheat2"</span>) <span class="sc">+</span> </span>
<span id="cb7-3"><a href="http://localhost:6604/#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Title"</span>) <span class="sc">+</span></span>
<span id="cb7-4"><a href="http://localhost:6604/#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">"Subtitle"</span>) <span class="sc">+</span></span>
<span id="cb7-5"><a href="http://localhost:6604/#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb7-6"><a href="http://localhost:6604/#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb7-7"><a href="http://localhost:6604/#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)) <span class="sc">+</span></span>
<span id="cb7-8"><a href="http://localhost:6604/#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb7-9"><a href="http://localhost:6604/#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">low =</span> <span class="st">"plum"</span>, <span class="at">high =</span> <span class="st">"darkolivegreen"</span>, <span class="at">name =</span> <span class="st">"Scale"</span>, <span class="at">label =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb7-10"><a href="http://localhost:6604/#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb7-11"><a href="http://localhost:6604/#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">1</span>, <span class="at">y=</span> <span class="dv">1</span>, <span class="at">label=</span> <span class="st">"Example text box"</span>,    </span>
<span id="cb7-12"><a href="http://localhost:6604/#cb7-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">color=</span><span class="st">"black"</span>, <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">35</span>, <span class="at">size =</span> <span class="fl">2.6</span>) </span>
<span id="cb7-13"><a href="http://localhost:6604/#cb7-13" aria-hidden="true" tabindex="-1"></a>frequencies_map4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Creating US Maps_files/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="binary-maps" class="level2">
<h2 class="anchored" data-anchor-id="binary-maps">Binary Maps<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6604/#binary-maps" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>The above maps were great when I wanted to display distribution of some continuous variable across the US, but when I wanted to demonstrate which states had something other states did not, I found this code to visualize better:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="http://localhost:6604/#cb8-1" aria-hidden="true" tabindex="-1"></a>binary_map1 <span class="ot">&lt;-</span> </span>
<span id="cb8-2"><a href="http://localhost:6604/#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_usmap</span>(<span class="at">data =</span> Duplicate_Map_Data, <span class="at">values =</span> <span class="st">"Var_1"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">regions =</span> <span class="st">"states"</span>, <span class="at">include =</span> <span class="fu">c</span>(), <span class="at">labels =</span> <span class="cn">TRUE</span>, <span class="at">label_color =</span> <span class="st">"black"</span>) <span class="sc">+</span> </span>
<span id="cb8-3"><a href="http://localhost:6604/#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb8-4"><a href="http://localhost:6604/#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb8-5"><a href="http://localhost:6604/#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">low =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"lightskyblue4"</span>, <span class="at">name =</span> <span class="st">"Has Variation"</span>, <span class="at">label =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb8-6"><a href="http://localhost:6604/#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Title"</span>) <span class="sc">+</span></span>
<span id="cb8-7"><a href="http://localhost:6604/#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)  </span>
<span id="cb8-8"><a href="http://localhost:6604/#cb8-8" aria-hidden="true" tabindex="-1"></a>binary_map1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Creating US Maps_files/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>If you really want states to pop, you can camouflage the state abbreviations by changing the color:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="http://localhost:6604/#cb9-1" aria-hidden="true" tabindex="-1"></a>binary_map2 <span class="ot">&lt;-</span> </span>
<span id="cb9-2"><a href="http://localhost:6604/#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_usmap</span>(<span class="at">data =</span> Duplicate_Map_Data, <span class="at">values =</span> <span class="st">"Var_1"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">regions =</span> <span class="st">"states"</span>, <span class="at">include =</span> <span class="fu">c</span>(), <span class="at">labels =</span> <span class="cn">TRUE</span>, <span class="at">label_color =</span> <span class="st">"white"</span>) <span class="sc">+</span> </span>
<span id="cb9-3"><a href="http://localhost:6604/#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb9-4"><a href="http://localhost:6604/#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb9-5"><a href="http://localhost:6604/#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">low =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"lightskyblue4"</span>, <span class="at">name =</span> <span class="st">"Has Variation"</span>, <span class="at">label =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb9-6"><a href="http://localhost:6604/#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Title"</span>) <span class="sc">+</span></span>
<span id="cb9-7"><a href="http://localhost:6604/#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)  </span>
<span id="cb9-8"><a href="http://localhost:6604/#cb9-8" aria-hidden="true" tabindex="-1"></a>binary_map2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Creating US Maps_files/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="saving-maps" class="level2">
<h2 class="anchored" data-anchor-id="saving-maps">Saving Maps<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6604/#saving-maps" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>Make sure to save your maps! There are many options for saving. More info below.</p>
<p><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="uri">https://ggplot2.tidyverse.org/reference/ggsave.html</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="http://localhost:6604/#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"binarymap.jpeg"</span>, <span class="at">plot =</span> binary_map1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->





<script>window.backupDefine = window.define; window.define = undefined;</script>
<script type="text/javascript" src="./Creating US Maps_files/quarto-preview.js"></script>
<script>window.define = window.backupDefine; window.backupDefine = undefined;</script>
<script type="text/javascript">
  const options = {
    origin: "",
    search: "",
    inputFile: "/Users/tawny/Desktop/Creating US Maps2.qmd",
    isPresentation: false
  }
  document.addEventListener("DOMContentLoaded", function () {
    window.QuartoPreview.init(options);
  });
</script>
<div><div dir="ltr" class="fui-FluentProvider fui-FluentProviderr0 ___jdtuxv0 f19n0e5 fxugw4r f1o700av fk6fouc fkhj508 figsok6 f1i3iumi"></div></div><i tabindex="0" role="none" data-tabster-dummy="" aria-hidden="true" style="position: fixed; height: 1px; width: 1px; opacity: 0.001; z-index: -1; content-visibility: hidden; top: 0px; left: 0px;"></i></body></html>